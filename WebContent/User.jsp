<%@page import="java.util.Map"%><%@page import="java.util.List"%><%@page import="com.right.dao.MenuDAO"%><%@ page language="java" contentType="text/html; charset=UTF-8"	pageEncoding="UTF-8"%><%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %><%@ taglib uri="http://logging.apache.org/log4j/tld/log" prefix="log" %><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"><script src="jquery/jquery-1.9.1.min.js"></script><script src="bootstrap/js/bootstrap.min.js"></script><title>权限管理</title><script type="text/javascript" >	//处理浏览器直接关闭的	//function checkLeave(){    //if (event.clientX>document.body.clientWidth && event.clientY<0||event.altKey){      //  window.open('check_logout.jsp','',        //        'height=1366,width=768,top=0,left=0');   		 //}	//}	//$(window).bind('beforeunload',function(){return '您输入的内容尚未保存，确定离开此页面吗？';});		//真正起作用的是下面的代码，而且不用body绑定属性	//$(window).bind('beforeunload',function(){		//window.open('check_logout.jsp','', 'height=0,width=0,top=0,left=0');  		//window.open('check_logout.jsp','', 'height=0,width=0,top=0,left=0');  		//return '您输入的内容尚未保存，确定离开此页面吗？';		//}	//);	 //function  checkLeave()        //{        	//if(event.clientX>document.body.clientWidth&&event.clientY<0||event.altKey)          // {   	    	// window.open('check_logout.jsp','',	    		//               'height=1366,width=768,top=0,left=0');  		           //}        //}		//处理浏览器关闭结束	//修改	function modify() {		var chk_id = document.getElementsByName("chk_id");		var mod = document.getElementById("mod");		var i = 0;		for (; i < chk_id.length; i++) {			if (chk_id[i].checked == true)				break;		}		//由于如果全部遍历完，就说明没有找到，所以就等于length长度		if (i == chk_id.length) {			alert("未选择！");			mod.setAttribute('data-target', '');		} else {			mod.setAttribute('data-target', '#modify_modal');			//mod.setAttribute('href', 'menu_modify.jsp?id='				//			+ chk_id[i].value);						mod.setAttribute('href', 'user!modify.action?id='					+ chk_id[i].value);		}		$("#modify_modal").on("hidden.bs.modal", function() {			$(this).removeData("bs.modal");		});	}		function delete1(){		var del_id = document.getElementById("del");		del_id.setAttribute('data-target', '#delete_modal');		//console.log("else str"+str);		del_id.setAttribute('href', 'user!redirectUserDelete.action');						//删除结束	}	</script></head>		<!--是否通过关闭按钮或者用Alt+F4退出	如果为刷新触发onbeforeunload事件，下面if语句不执行 	<body 	onbeforeunload="checkLeave()" >	 --> <body>	<div class="container-fluid"		style="padding-left: 0px; padding-right: 0px">		<div class="row-fluid">			<jsp:include page="top.jsp"></jsp:include>		</div>		<div class="row-fluid">			<div class="col-md-2" style="margin-top: 20">				<jsp:include page="left.html"></jsp:include>			</div>			<div class="col-md-10" style="margin-top: 20">			<div style="float: right">							<input class="btn btn-default btn-primary" type="button"								href="user!insert.action" data-toggle="modal"								data-target="#insert_modal" value="新增"> 							<input								class="btn btn-default btn-primary" type="button" id="mod"								href="" data-toggle="modal" data-target="#modify_modal"								onclick="modify()" value="修改">							<input								class="btn btn-default btn-primary" type="button" id="del"								onclick="delete1()" data-toggle="modal" value="删除">						</div>				<form role="form" id="deleteMenuForm"  method="post" action="user!delete.action" >					<table class="table table-striped table-bordered">						<caption>用户列表</caption>						<thead>							<tr>								<th>选择</th>								<th>Status</th>								<th>Address</th>								<th>Email</th>								<th>logname</th>								<th>mobilephone</th>								<th>name</th>								<th>password</th>								<th>对应的角色</th>									</tr>						</thead>						<tbody>														<c:forEach items="${userList}" var="user">															<tr>									<td><input type="checkbox" name="chk_id" value="${user.id}"/></td>									<td>${user.status }</td>									<td>${user.address }</td>									<td>${user.email }</td>									<td>${user.loginname }</td>									<td>${user.mobilephone }</td>									<td>${user.name }</td>									<td>${user.password }</td>																																													<td>${user.role.name }</td>								</tr>							</c:forEach>						</tbody>					</table>				</form>			</div>		</div>	</div>	<!-- 新增-模态对话框 -->	<div class="modal fade" id="insert_modal">		<div class="modal-dialog">			<div class="modal-content">				<!-- 嵌入menu_insert.jsp页面内容 -->			</div>			<!-- 对话框内容部分 -->		</div>		<!-- /对话框-->	</div>	<!-- 修改-模态对话框 -->	<div class="modal fade" id="modify_modal">		<div class="modal-dialog">			<div class="modal-content">				<!-- 嵌入menu_modify.jsp页面内容 -->			</div>			<!-- 对话框内容部分 -->		</div>		<!-- /对话框-->	</div>		<!-- 删除对话框 -->		<div class="modal fade" id="delete_modal">		<div class="modal-dialog">			<div class="modal-content">				<!-- 嵌入menu_modify.jsp页面内容 -->			</div>			<!-- 对话框内容部分 -->		</div>		<!-- /对话框-->	</div></body></html>